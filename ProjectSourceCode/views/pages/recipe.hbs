<!-- CSS for Heart Toggle Effect -->
<style>
  .heart-toggle i {
      font-size: 1.5rem;
      transition: transform 0.2s ease, color 0.2s ease;
  }

  /* Unliked state: red outline */
  .heart-toggle.outline i {
      color: red;
  }

  /* Unliked hover state: dark red */
  .heart-toggle.outline:hover i {
      color: darkred;
      transform: scale(1.2);
  }

  /* Liked state: filled heart in red */
  .heart-toggle.filled i {
      color: red;
  }

  /* Optional: slight scale even when liked */
  .heart-toggle.filled:hover i {
      transform: scale(1.2);
  }
</style>

<div class="container mt-4">
    <h1>{{recipe.title}}</h1>
    <img src="{{recipe.image_url}}" alt="{{recipe.title}}" class="img-fluid">
    <p>{{recipe.description}}</p>
    
    <!-- Display like count and a toggling heart icon -->
    <p>Likes: {{likes}}</p>
    <form action="/recipes/{{recipe.recipe_id}}/like" method="post" style="display: inline;">
        <button type="submit" class="btn btn-link p-0 heart-toggle {{#if liked_by_user}}filled{{else}}outline{{/if}}">
            {{#if liked_by_user}}
                <i class="bi bi-heart-fill"></i>
            {{else}}
                <i class="bi bi-heart"></i>
            {{/if}}
        </button>
    </form>

    <!-- Display Comments -->
    <h2 class="mt-4">Comments</h2>
    <ul class="list-group mb-3">
        {{#each comments}}
            <li class="list-group-item">
                <strong>{{username}}</strong> said: {{comment_text}}<br>
                <small class="text-muted">{{created_at}}</small>
            </li>
        {{/each}}
    </ul>

    <!-- Comment Form -->
    <form action="/recipes/{{recipe.recipe_id}}/comments" method="post">
        <div class="mb-3">
            <textarea name="comment" class="form-control" rows="3" placeholder="Add a comment..." required></textarea>
        </div>
        <button type="submit" class="btn btn-secondary">Post Comment</button>
    </form>
</div>
