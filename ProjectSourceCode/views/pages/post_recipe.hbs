<div class="w-100 d-flex" style="padding: 20px; justify-content: center;">
    <form action="/post_recipe" method="post" enctype="multipart/form-data">
        <div class="card p-3 recipe-card container text-center" style="width: 40rem;">
            <div class="row p-2 justify-content-center text-center w-100">
                <h1>Post Recipe</h1>
            </div>
            <div class="row p-2 justify-content-center mb-3">
                {{> alert}}
            </div>
            <div class="row p-2 justify-content-center mb-3">
                <h4>Recipe Name</h4>
                <input class="form-control  mt-2" style="width: 300px;" type="text" name="recipeName"
                    placeholder="Recipe Name" required>
            </div>
            <hr>
            <div class="row p-2 justify-content-center mb-3">
                <h4>Description</h4>
                <textarea class="form-control mt-2" style="width: 300px;" name="description"
                    placeholder="Give us a description of your recipe"></textarea>
            </div>
            <hr>
            <div class="row p-2 justify-content-center mb-3">
                <h4>How long does it take to make your recipe?</h4>
                <input type="text" id="duration" name="duration" placeholder="HH:MM e.g. 01:15"
                    style="width:max-content" class="mt-2 form-control" required>
                <small>eg: 01:15 for 1 hour and 15 minutes</small>
                <p id="timeError" style="color: red; display: none;">Invalid Format!</p>
            </div>
            <hr>
            <div class="row p-2 justify-content-center mb-3">
                <h4>Instructions</h4>
                <textarea class="form-control  mt-2" style="width: 300px;" name="instructions"
                    placeholder="How do we make your recipe? Enter instructions separated by &quot;|&quot;" required></textarea>
            </div>
            <hr>
            <div class="row p-2 justify-content-center mb-3">
                <h4>Ingredients</h4>
                <textarea class="form-control  mt-2" style="width: 300px;" name="ingredients"
                    placeholder="What do we need to make your recipe? (comma-separated list)" required></textarea>
            </div>
            <hr>
            <div class="row p-2 justify-content-center mb-3">
                <h4>Privacy</h4>
                <select id="privacy" name="privacy" required style="width: 300px;">
                    <option value="false">Private</option>
                    <option value="true">Public</option>
                </select>
            </div>
            <hr>
            <div class="row p-2 justify-content-center">
                <label for="imageUpload">Show us what your recipe looks like</label>
                <input type="file" id="imageUpload" name="imageUpload" accept="image/*" style="width: 300px;" class="mt-2 form-control">
            </div>
            <hr>
            <div class="row p-2 justify-content-center">
                <button class="form-control btn btn-primary" style="width: 150px;" type="submit">Post Recipe</button>
            </div>
        </div>
    </form>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const durationInput = document.getElementById("duration");
        const errorMessage = document.getElementById("timeError");
        const form = document.querySelector("form");

        durationInput.addEventListener("input", function () {
            const pattern = /^(?:[01]\d|2[0-3]):[0-5]\d$/;
            if (pattern.test(this.value)) {
                errorMessage.style.display = "none";
            } else {
                errorMessage.style.display = "block";
            }
        });

        form.addEventListener("submit", function (event) {
            if (errorMessage.style.display === "block") {
                event.preventDefault();
                alert("Please enter a valid time in HH:MM format.");
            }
        });
    });
</script>